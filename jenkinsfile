pipeline {
  agent {
        label 'traxx-testops'
    }
   tools {
        nodejs 'nodejs_18'
    }
  stages {
    
    stage('installation') {
      steps {
       
        sh 'npm ci'  
sh 'apt-get install libgtk2.0-0 libgtk-3-0 libgbm-dev libnotify-dev libgconf-2-4 libnss3 libxss1 libasound2 libxtst6 xauth xvfb'
sh 'npx cypress verify'
        //sh 'npm install cypress --save-dev'
      }
    }
    stage('run e2e tests') {
    
      steps {
        sh 'npm run cy:run'
      }
    }
  }
 
}
